<template name="templates">
<div id="content">
{{#if privateTemplates.count}}
  <div class="ui text container">
    <div class="ui text">

      {{#if queue}}
        <div id="prep" class="ui icon message" style="overflow:hidden; !important">
          <i class="folder icon"></i>
          <div class="content">
            <p>Choose a template below to copy items into <b>{{queue.folderName}}</b> <a id="folderQuestion" class="ui right corner green label"><i class="question icon"></i></a></p>
          </div>
        </div>
      {{else}}
        <div class="ui icon negative message">
          <i class="warning sign icon"></i>
          <div class="content">
            <div class="header">
              Hold on!
            </div>
            <p>It looks like you haven't chosen a folder from Box yet. Go to More Actions on the folder you'd like to copy to and choose "CloudTemplates for Box".</p>
          </div>
        </div>
      {{/ if}}

      <div id="copy" class="ui hidden icon blue message">
        <i class="notched circle loading icon"></i>
        <div class="content">
          <div class="header">
            Just a second
          </div>
          <p>We're copying items into <b>{{queue.folderName}}</b></p>
        </div>
      </div>

      <div id="success" class="ui hidden icon positive floating message">
        <i class="checkmark icon"></i>
        <i class="close icon"></i>
        <div class="content">
          <div class="header">
            Success!
          </div>
          <p id="successStatus"></p>
          <div id="itemsCopySuccess" class="hidden">
          </div>
        </div>
      </div>

      <div id="warning" class="ui hidden icon warning floating message">
        <i class="warning sign icon"></i>
        <i class="close icon"></i>
        <div class="content">
          <div class="header">
            Some items were not created
          </div>
          <p id="warningStatus"></p>
          <div id="itemsCopyWarning" class="hidden">
          </div>
        </div>
      </div>

      <div id="fail" class="ui hidden icon negative floating message">
        <i class="warning sign icon"></i>
        <i class="close icon"></i>
        <div class="content">
          <div class="header">
            Something went wrong!
          </div>
          <p><b><span id="errorDesc"></span></b></p>
        </div>
      </div>

    <!-- TEMPLATE CREATION SECTION -->
    {{#if queue}}

      <div class="ui dividing header">
        <div id="selectTemplate" class="ui dropdown">
          <div class="text"><h2>Choose Template...</h2></div>
          <i class="dropdown icon"></i>
          <div class="menu">
            <div class="ui icon search input">
              <i class="search icon"></i>
              <input type="text" placeholder="Search templates...">
            </div>
            <div class="divider"></div>
            {{#each privateTemplates}}
              <div class="item dropdown-item">
                {{name}}
                <span class="description">Private</span>
              </div>
            {{/ each}}
          </div>
        </div>
      </div>
      <p id="description">Select a template above to get started</p>

      <div id="formElements" class="hidden">
        <!-- <form class="ui form">
          <div class="field">
            <label>New Folder Name</label>
            <input type="text" name="newFolderName" placeholder="New Folder Name">
          </div>
        </form> -->

        <br><br>

        <button id="copyTemplate" class="positive ui right floated disabled button">Copy Template</button>
      </div>

    {{/if}} <!-- if queue -->
      <!-- END TEMPLATE CREATION SECTION -->

    </div>
  </div>

{{else}}

  <h1 class="ui centered header">
    Hold on, you need to create a Template!
  </h1>
  <p class="ui centered header">Follow the steps below {{#if queue}}before copying into "{{queue.folderName}}"{{else}}to get started{{/if}}</p>

  <div id="top" class="ui vertical stripe segment">
    <div class="ui middle aligned stackable grid container">
      <div class="row">
        <div class="eight wide column">
          <h2 class="ui header">First, Create a Template</h2>
            <p>Your first step is to create a Template! A Template is just a Box folder that can be quickly copied into other folders.
            Create one for sales collateral, project materials, or info for new customers.</p>
        </div>
        <div class="six wide right floated column">
          <img src="/images/create.png" class="ui rounded image">
        </div>
      </div>
      <div class="row">
        <div class="center aligned column">
          <a class="ui large button" href="/template/create">Create</a>
        </div>
      </div>
    </div>
  </div>

  <div class="ui vertical stripe segment">
    <div class="ui middle aligned stackable grid container">
      <div class="row">
        <div class="eight wide column">
          <h2 class="ui header">Then, Copy from a Template</h2>
            <p>Once you've created a Template, come back to this page so you can use it to copy items into your Box folder. Just <a href="https://box.com/services/browse/search/cloudtemplates_for_box" target="_blank">add the integration</a> to your Box account
            and click "Create from CloudTemplates" on the folder you want to copy items into!</p>
        </div>
        <div class="six wide right floated column">
          <img src="/images/integration.png" class="ui rounded image">
        </div>
      </div>
    </div>
  </div>

{{/if}}

{{> folderQuestion}}
</div>

</template>


<template name="folderQuestion">
  <div id="folderQuestionModal" class="ui basic modal">
    <div class="centered header">
      Copying Items into a Folder
    </div>
    <div class="content">
      <div class="description">
        <p>This page allows you to copy items from your existing Templates into a Box folder.
          It looks like <b>{{queue.folderName}}</b> is the last folder you tried to copy into, so we remembered it from last time.
          If you want to copy into a different folder instead, <b>right-click on that folder in Box and choose "Copy from CloudTemplates" in the More Actions menu.</b>
        </p>
      </div>
    </div>
    <div class="actions">
      <div class="ui basic green inverted button cancel">
        <i class="check icon"></i>
        Ok, Got It
      </div>
    </div>
  </div>
</template>
